<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<textarea name="" id="source" cols="30" rows="10">2014/6/18,巴西,3,386,94939,A 2014/6/18,克罗地亚,1,232,5509,A 2014/6/18,墨西哥,1,376,14482,A 2014/6/18,喀麦隆,0,167,1941,A 2014/6/18,荷兰,5,243,119778,B 2014/6/18,智利,3,501,9136,B 2014/6/18,西班牙,1,457,46752,B 2014/6/18,澳大利亚,1,188,4779,B 2014/6/18,哥伦比亚,3,256,5493,C 2014/6/18,希腊,0,280,9694,C 2014/6/18,日本,1,229,20375,C 2014/6/18,科特迪瓦,2,325,2197,C 2014/6/18,乌拉圭,1,322,5452,D 2014/6/18,哥斯达黎加,3,247,2219,D 2014/6/18,意大利,2,503,28532,D 2014/6/18,英格兰,1,361,13382,D 2014/6/18,法国,3,566,25766,E 2014/6/18,瑞士,2,425,6083,E 2014/6/18,洪都拉斯,0,184,1859,E 2014/6/18,厄瓜多尔,1,212,1717,E 2014/6/18,阿根廷,2,391,17500,F 2014/6/18,尼日利亚,0,400,3054,F 2014/6/18,波黑,1,303,4664,F 2014/6/18,伊朗,0,148,3594,F 2014/6/18,德国,4,469,221480,G 2014/6/18,葡萄牙,0,331,19322,G 2014/6/18,美国,2,193,8889,G 2014/6/18,加纳,1,338,4386,G 2014/6/18,比利时,2,515,7907,H 2014/6/18,俄罗斯,1,325,5735,H 2014/6/18,韩国,1,296,13135,H 2014/6/18,阿尔及利亚,1,180,4021,H 2014/6/23,巴西,3,475,116799,A 2014/6/23,克罗地亚,5,797,7461,A 2014/6/23,墨西哥,1,1044,16512,A 2014/6/23,喀麦隆,0,1253,2828,A 2014/6/23,荷兰,8,1587,151574,B 2014/6/23,智利,5,1819,18433,B 2014/6/23,西班牙,1,2278,75971,B 2014/6/23,澳大利亚,3,2603,8237,B 2014/6/23,哥伦比亚,5,2854,9877,C 2014/6/23,希腊,0,2959,13726,C 2014/6/23,日本,1,3418,31831,C 2014/6/23,科特迪瓦,3,3750,3671,C 2014/6/23,乌拉圭,3,3910,10624,D 2014/6/23,哥斯达黎加,4,4177,9049,D 2014/6/23,意大利,2,4675,48018,D 2014/6/23,英格兰,2,5021,24116,D 2014/6/23,法国,8,5247,49474,E 2014/6/23,瑞士,4,5616,11840,E 2014/6/23,洪都拉斯,1,5831,2759,E 2014/6/23,厄瓜多尔,3,229,2476,E 2014/6/23,阿根廷,3,682,27877,F 2014/6/23,尼日利亚,1,960,4813,F 2014/6/23,波黑,1,1365,7114,F 2014/6/23,伊朗,0,1455,10411,F 2014/6/23,德国,6,1993,317905,G 2014/6/23,葡萄牙,2,2408,25316,G 2014/6/23,美国,4,2776,18098,G 2014/6/23,加纳,3,3057,18965,G 2014/6/23,比利时,3,3378,11387,H 2014/6/23,俄罗斯,1,3655,8335,H 2014/6/23,韩国,3,3949,22268,H 2014/6/23,阿尔及利亚,5,4240,5683,H 2014/6/27,巴西,7,4534,134937,A 2014/6/27,克罗地亚,6,4836,8136,A 2014/6/27,墨西哥,4,5067,18797,A 2014/6/27,喀麦隆,1,5324,3195,A 2014/6/27,荷兰,10,5505,171238,B 2014/6/27,智利,5,5903,22216,B 2014/6/27,西班牙,4,6373,84146,B 2014/6/27,澳大利亚,3,6684,8764,B 2014/6/27,哥伦比亚,9,6874,13543,C 2014/6/27,希腊,2,7121,17207,C 2014/6/27,日本,2,7454,39087,C 2014/6/27,科特迪瓦,4,7780,5893,C 2014/6/27,乌拉圭,4,8028,15882,D 2014/6/27,哥斯达黎加,4,8335,12224,D 2014/6/27,意大利,2,8705,62791,D 2014/6/27,英格兰,2,9108,27657,D 2014/6/27,法国,8,9546,63506,E 2014/6/27,瑞士,7,9804,13954,E 2014/6/27,洪都拉斯,1,10230,3288,E 2014/6/27,厄瓜多尔,3,10390,3050,E 2014/6/27,阿根廷,6,10804,35366,F 2014/6/27,尼日利亚,3,11042,6715,F 2014/6/27,波黑,4,11519,8757,F 2014/6/27,伊朗,1,11744,12621,F 2014/6/27,德国,7,12395,376895,G 2014/6/27,葡萄牙,4,12737,30407,G 2014/6/27,美国,4,13015,26210,G 2014/6/27,加纳,4,13255,28854,G 2014/6/27,比利时,4,13490,13272,H 2014/6/27,俄罗斯,2,13872,9914,H 2014/6/27,韩国,3,14184,28671,H 2014/6/27,阿尔及利亚,6,14487,6789,H</textarea>
	<textarea name="" id="target" cols="30" rows="10"></textarea>
</body>
<script>
	(function(){
		var sourceVal = document.getElementById('source').value;
		var target = document.getElementById('target');
		var items = sourceVal.split(' ');
		var objs = [];

		for(var i=0;i<items.length;i++){
			objs.push(items[i].split(','));
		}
		var obj = {
			date:objs[0][0],
			series:[]
		};
		var result = [obj];
		for(var j=0;j<objs.length;j++){
			var o = objs[j];
			var series = obj.series;
			//同一天的归到一个数组里面
			if(o[0]!==obj.date){
				obj = {
					date:o[0],
					series:[]
				};
				result.push(obj);
			}
			series.push({
				nation:o[1],
                goal:parseInt(o[2]),
                pass:parseInt(o[3]),
                search:parseInt(o[4]),
                group:o[5],
			});
		}
		target.value = JSON.stringify(result);
	})();
</script>
</html>